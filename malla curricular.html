<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular - Ingeniería Empresarial</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #ffe7e7;
      font-family: 'Poppins', sans-serif;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #ff8cdb;
      margin-bottom: 30px;
    }
    .ciclo {
      margin-bottom: 40px;
    }
    .ciclo h2 {
      background: #e9ecef;
      padding: 10px 20px;
      border-radius: 12px;
      color: #495057;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.05);
      width: fit-content;
    }
    .cursos {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-top: 15px;
    }
    .curso {
      border-radius: 16px;
      padding: 16px;
      width: 260px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    .curso:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
    }
    .curso h3 {
      margin: 0 0 10px 0;
      font-size: 16px;
    }
    .curso p {
      margin: 4px 0;
      font-size: 14px;
    }
    .icono {
      font-size: 18px;
      margin-right: 6px;
    }
    .bloqueado {
      background-color: ##e1e1e1;
      color: #888;
      cursor: not-allowed;
    }
    .habilitado {
      background-color: #e1c4ff;
      color: #004085;
    }
    .aprobado {
      background-color: #ffd9d9;
      color: #155724;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <h1>💼 Malla Curricular - Ingeniería Empresarial</h1>
  <div id="contenedor-ciclos"></div>
  <script>
    const cursosData = [
      {
        ciclo: 1,
        cursos: [
          { id: "RRHH1101", nombre: "🎯 Desarrollo del Talento", creditos: 2, detalle: "HT: 2" },
          { id: "MATH1002", nombre: "📐 Complemento Matemático", creditos: 5, detalle: "HT: 4 | HP: 2" },
          { id: "MAGM1104", nombre: "💼 Introducción a la Ing. Empresarial", creditos: 3, detalle: "HT: 2 | HL: 2" },
          { id: "QUIM1105", nombre: "🧪 Química 1", creditos: 4, detalle: "HT: 2 | HP: 2 | HL: 2" },
          { id: "LENG1001", nombre: "📝 Comunicación 1", creditos: 5, detalle: "HT: 4 | HP: 2" },
          { id: "ECON1203", nombre: "💰 Economía", creditos: 3, detalle: "HT: 2 | HP: 2" }
        ]
      },
      {
        ciclo: 2,
        cursos: [
          { id: "MATH1003", nombre: "📐 Matemática Básica", creditos: 5, detalle: "HT: 4 | HP: 2", req: ["MATH1002"] },
          { id: "LENG1002", nombre: "📝 Comunicación 2", creditos: 5, detalle: "HT: 4 | HP: 2", req: ["LENG1001"] },
          { id: "CONT1208", nombre: "📊 Gestión Contable", creditos: 3, detalle: "HT: 2 | HP: 2" },
          { id: "HUMA1306", nombre: "🌍 Ciudadanía Global", creditos: 2, detalle: "HT: 2" },
          { id: "INVE1101", nombre: "📖 Metodología Universitaria", creditos: 3, detalle: "HT: 2 | HP: 2" }
        ]
      },
      {
        ciclo: 3,
        cursos: [
          { id: "MATH1101A", nombre: "📐 Cálculo 1", creditos: 5, detalle: "HT: 4 | HP: 2", req: ["MATH1003"] },
          { id: "ISOF1202A", nombre: "💾 Gestión de Base de Datos", creditos: 3, detalle: "HT: 2 | HL: 2" },
          { id: "STAT1203A", nombre: "📊 Probabilidad y Estadística", creditos: 5, detalle: "HT: 4 | HP: 2", req: ["MATH1003"] },
          { id: "IDIO1401", nombre: "🗣️ Pre Beginner 1", creditos: 1, detalle: "HT: 1" },
          { id: "LENG1003", nombre: "📝 Comunicación 3", creditos: 5, detalle: "HT: 4 | HP: 2", req: ["LENG1002"] },
          { id: "INFO1120A", nombre: "💻 Herramientas Informáticas", creditos: 2, detalle: "HT: 2" }
        ]
      },
      {
        ciclo: 4,
        cursos: [
          { id: "MATH1202A", nombre: "📐 Cálculo 2", creditos: 5, detalle: "HT: 4 | HP: 2", req: ["MATH1101A"] },
          { id: "INFO1204A", nombre: "💻 Sistemas de Información Empresarial", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["ISOF1202A"] },
          { id: "STAT1204", nombre: "📊 Herramientas Estadísticas para la Investigación", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["STAT1203A"] },
          { id: "FINN1319", nombre: "💰 Ingeniería Económica y Finanzas", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["MATH1101A"] },
          { id: "RRHH1303", nombre: "👥 Empleabilidad", creditos: 4, detalle: "HT: 2 | PC: 4", req: ["RRHH1101"] },
          { id: "MARK1203B", nombre: "📈 Gerencia de Marketing", creditos: 4, detalle: "HT: 4" }
        ]
      },
      {
        ciclo: 5,
        cursos: [
          { id: "INFO1308A", nombre: "🖥️ Tecnologías de Información Aplicadas a los Negocios", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["ISOF1202A"] },
          { id: "OPER1308A", nombre: "🏗️ Ingeniería de Productos y Procesos", creditos: 6, detalle: "HT: 6", req: ["MARK1203B"] },
          { id: "FINN1313", nombre: "💵 Gestión de Costos", creditos: 3, detalle: "HT: 2 | HP: 2", req: ["CONT1208"] },
          { id: "HUMA1111", nombre: "🌱 Responsabilidad Social", creditos: 2, detalle: "HT: 2" },
          { id: "FISI1207", nombre: "⚛️ Física 1", creditos: 4, detalle: "HT: 2 | HP: 2 | HL: 2", req: ["MATH1003"] },
          { id: "IDIO1402", nombre: "🗣️ Pre Beginner 2", creditos: 1, detalle: "HT: 1", req: ["IDIO1401"] }
        ]
      },
      {
        ciclo: 6,
        cursos: [
          { id: "MAGM1313A", nombre: "🔄 Gestión de Procesos de Negocios (BPM)", creditos: 4, detalle: "HT: 4", req: ["OPER1308A"] },
          { id: "INVE1301", nombre: "📝 Metodología de la Investigación", creditos: 3, detalle: "HT: 2 | HP: 2", req: ["INVE1101"] },
          { id: "FINN1408A", nombre: "🌍 Finanzas Internacionales", creditos: 4, detalle: "HT: 4", req: ["FINN1319"] },
          { id: "MAGM1311A", nombre: "🏛️ Arquitectura Empresarial", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["INFO1308A"] },
          { id: "OPER1405R", nombre: "📐 Investigación de Operaciones", creditos: 5, detalle: "HT: 4 | HL: 2", req: ["MATH1202A"] }
        ]
      },
      {
        ciclo: 7,
        cursos: [
          { id: "SUPP1405", nombre: "🚚 Gerencia de la Cadena de Suministros", creditos: 4, detalle: "HT: 4", req: ["MAGM1313A"] },
          { id: "EMPR1403", nombre: "💡 Innovación y Emprendimiento", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["MARK1203B"] },
          { id: "HUMA1406", nombre: "🤝 Proyecto Social", creditos: 1, detalle: "HT: 1", req: ["HUMA1111"] },
          { id: "COME1412", nombre: "🧭 Dirección de Procesos Comerciales y TI", creditos: 3, detalle: "HT: 2 | HP: 2", req: ["OPER1308A"] },
          { id: "RRHH1306A", nombre: "👤 Procesos de Gestión de Personas y TI", creditos: 5, detalle: "HT: 4 | HL: 2", req: ["INFO1204A"] },
          { id: "FINN1404B", nombre: "📊 Formulación y Evaluación de Proyectos", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["FINN1319"] }
        ]
      },
      {
        ciclo: 8,
        cursos: [
          { id: "COME1401A", nombre: "🧩 Gestión Estratégica Comercial", creditos: 3, detalle: "HT: 3", req: ["COME1412"] },
          { id: "MAGM1406", nombre: "🏢 Gestión del Cambio Organizacional", creditos: 3, detalle: "HT: 3", req: ["MAGM1313A"] },
          { id: "EMPR1406", nombre: "🚀 Emprendimiento Empresarial", creditos: 4, detalle: "HT: 3 | HL: 2", req: ["EMPR1403"] },
          { id: "SEGU1405", nombre: "💼 Finanzas Corporativas y Seguros", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["FINN1408A"] },
          { id: "PROY1406", nombre: "📋 Gestión de Proyectos Empresariales", creditos: 4, detalle: "HT: 3 | HL: 2", req: ["FINN1404B"] }
        ]
      },
      {
        ciclo: 9,
        cursos: [
          { id: "PRAC1501", nombre: "🧪 Práctica Pre Profesional", creditos: 3, detalle: "HT: 3", req: ["PROY1406"] },
          { id: "MAGM1410", nombre: "🏢 Gestión Estratégica del Talento Humano", creditos: 3, detalle: "HT: 3", req: ["MAGM1406"] },
          { id: "FINN1509", nombre: "📈 Análisis Financiero", creditos: 3, detalle: "HT: 3", req: ["SEGU1405"] },
          { id: "COME1504", nombre: "🧭 Dirección Estratégica Comercial", creditos: 4, detalle: "HT: 3 | HL: 2", req: ["COME1401A"] },
          { id: "RRHH1502", nombre: "👥 Gestión del Talento Humano en Entornos Digitales", creditos: 3, detalle: "HT: 2 | HL: 2", req: ["RRHH1306A"] }
        ]
      },
      {
        ciclo: 10,
        cursos: [
          { id: "COME1511", nombre: "🧭 Gerencia Comercial y Tecnologías Emergentes", creditos: 4, detalle: "HT: 3 | HL: 2", req: ["COME1504"] },
          { id: "PROY1512", nombre: "📝 Proyecto Integrador Empresarial", creditos: 5, detalle: "HT: 3 | HL: 4", req: ["PRAC1501"] },
          { id: "FINN1511", nombre: "📊 Tópicos Avanzados de Finanzas", creditos: 3, detalle: "HT: 3", req: ["FINN1509"] },
          { id: "MAGM1513", nombre: "🏢 Gobierno Corporativo", creditos: 3, detalle: "HT: 3", req: ["MAGM1410"] }
        ]
      }
    ];

    const contenedor = document.getElementById("contenedor-ciclos");

    // Función para renderizar la malla curricular
    function renderizarMalla() {
      contenedor.innerHTML = ''; // Limpia el contenedor antes de renderizar
      cursosData.forEach(({ ciclo, cursos }) => {
        const cicloDiv = document.createElement("div");
        cicloDiv.className = "ciclo";
        cicloDiv.innerHTML = `<h2>📘 Ciclo ${ciclo}</h2>`;
        const cursosDiv = document.createElement("div");
        cursosDiv.className = "cursos";

        cursos.forEach(curso => {
          const div = document.createElement("div");
          div.dataset.id = curso.id;
          if (curso.req) div.dataset.req = curso.req.join(",");
          
          let estado = "bloqueado"; // Estado inicial por defecto
          if (!curso.req || todosRequisitosAprobados(curso.req)) {
            estado = "habilitado";
          }
          if (localStorage.getItem(curso.id) === "aprobado") {
            estado = "aprobado";
          }

          div.className = `curso ${estado}`;
          div.innerHTML = `
            <h3>${curso.nombre}</h3>
            <p><span class="icono">📚</span> Créditos: ${curso.creditos}</p>
            <p><span class="icono">⏱</span> ${curso.detalle}</p>
          `;
          cursosDiv.appendChild(div);
        });

        cicloDiv.appendChild(cursosDiv);
        contenedor.appendChild(cicloDiv);
      });
    }

    // Función para verificar si los requisitos están aprobados
    function todosRequisitosAprobados(requisitos) {
      if (!requisitos || requisitos.length === 0) return true;
      return requisitos.every(reqId => localStorage.getItem(reqId) === "aprobado");
    }

    // Función principal para manejar los clics
    document.addEventListener("click", function(e) {
      const curso = e.target.closest(".curso");
      if (!curso || curso.classList.contains("bloqueado")) return;

      const id = curso.dataset.id;
      if (curso.classList.contains("aprobado")) {
        localStorage.removeItem(id); // Desmarca como aprobado
      } else {
        localStorage.setItem(id, "aprobado"); // Marca como aprobado
      }
      renderizarMalla(); // Vuelve a renderizar para actualizar los estados
    });

    // Renderizar la malla al cargar la página
    renderizarMalla();
  </script>
</body>
</html>